<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>å—å¶ã®å°çª</title><description>æ¬¢è¿æ¥ç©awa</description><link>https://www.nanye404.top/</link><language>zh_CN</language><item><title>RMè£…ç”²æ¿è¯†åˆ« - 01 å›¾åƒè¯»å–ä¸æ˜¾ç¤º</title><link>https://www.nanye404.top/posts/rm_opencv_01/</link><guid isPermaLink="true">https://www.nanye404.top/posts/rm_opencv_01/</guid><pubDate>Thu, 23 Oct 2025 00:00:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;é˜¶æ®µç›®æ ‡&lt;/strong&gt;: èƒ½è¯»å–å›¾ç‰‡ã€æ˜¾ç¤ºå¤„ç†ç»“æœã€ä¿å­˜æ–‡ä»¶&lt;br /&gt;
&lt;strong&gt;é€‚åˆäººç¾¤&lt;/strong&gt;: åˆšæ¥è§¦OpenCVçš„æ–°æ‰‹&lt;br /&gt;
&lt;strong&gt;é¢„è®¡ç”¨æ—¶&lt;/strong&gt;: 30åˆ†é’Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;h2&gt;ğŸ“š æœ¬é˜¶æ®µæ ¸å¿ƒAPIæ¸…å•&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;API&lt;/th&gt;
&lt;th&gt;ä½œç”¨&lt;/th&gt;
&lt;th&gt;é‡è¦æ€§&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;cv::imread()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¯»å–å›¾ç‰‡åˆ°å†…å­˜&lt;/td&gt;
&lt;td&gt;â­â­â­ æ ¸å¿ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;cv::imshow()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºå›¾ç‰‡çª—å£&lt;/td&gt;
&lt;td&gt;â­â­â­ æ ¸å¿ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;cv::waitKey()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç­‰å¾…æŒ‰é”®&lt;/td&gt;
&lt;td&gt;â­â­â­ æ ¸å¿ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;cv::imwrite()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¿å­˜å›¾ç‰‡&lt;/td&gt;
&lt;td&gt;â­â­ å¸¸ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;cv::Mat&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å›¾åƒæ•°æ®ç±»å‹&lt;/td&gt;
&lt;td&gt;â­â­â­ æ ¸å¿ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;cv::VideoCapture&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ‰“å¼€ç›¸æœº/è§†é¢‘&lt;/td&gt;
&lt;td&gt;â­â­ è¿›é˜¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr /&gt;
&lt;h2&gt;1. cv::imread() - è¯»å–å›¾ç‰‡&lt;/h2&gt;
&lt;h3&gt;ğŸ“– å‡½æ•°åŸå‹&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;cv::Mat cv::imread(const String&amp;amp; filename, int flags = IMREAD_COLOR);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ“‹ å‚æ•°è¯´æ˜&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;filename&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;å›¾ç‰‡è·¯å¾„ï¼ˆç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;flags&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;è¯»å–æ¨¡å¼ï¼ˆè§ä¸‹è¡¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;flagså¸¸ç”¨å€¼:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cv::IMREAD_COLOR&lt;/code&gt; (é»˜è®¤) - è¯»å–å½©è‰²å›¾ï¼Œå¿½ç•¥é€æ˜åº¦&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cv::IMREAD_GRAYSCALE&lt;/code&gt; - è½¬ä¸ºç°åº¦å›¾&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cv::IMREAD_UNCHANGED&lt;/code&gt; - åŒ…å«Alphaé€šé“&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;ğŸ’» åŸºç¡€ç”¨æ³•&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;lt;opencv2/opencv.hpp&amp;gt;
#include &amp;lt;iostream&amp;gt;

int main() {
    // è¯»å–å½©è‰²å›¾ï¼ˆè£…ç”²æ¿è¯†åˆ«ç”¨è¿™ä¸ªï¼‰
    cv::Mat img = cv::imread(&quot;armor.jpg&quot;, cv::IMREAD_COLOR);
    
    // âš ï¸ å¿…é¡»æ£€æŸ¥æ˜¯å¦è¯»å–æˆåŠŸï¼
    if (img.empty()) {
        std::cout &amp;lt;&amp;lt; &quot;âŒ å›¾ç‰‡è¯»å–å¤±è´¥ï¼&quot; &amp;lt;&amp;lt; std::endl;
        return -1;
    }
    
    // æ‰“å°å›¾ç‰‡ä¿¡æ¯
    std::cout &amp;lt;&amp;lt; &quot;âœ… å›¾ç‰‡è¯»å–æˆåŠŸ&quot; &amp;lt;&amp;lt; std::endl;
    std::cout &amp;lt;&amp;lt; &quot;   å°ºå¯¸: &quot; &amp;lt;&amp;lt; img.cols &amp;lt;&amp;lt; &quot; x &quot; &amp;lt;&amp;lt; img.rows &amp;lt;&amp;lt; std::endl;
    std::cout &amp;lt;&amp;lt; &quot;   é€šé“æ•°: &quot; &amp;lt;&amp;lt; img.channels() &amp;lt;&amp;lt; std::endl;
    
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ¯ è¾“å‡ºç¤ºä¾‹&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;âœ… å›¾ç‰‡è¯»å–æˆåŠŸ
   å°ºå¯¸: 1280 x 720
   é€šé“æ•°: 3
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;âš ï¸ å¸¸è§é”™è¯¯&lt;/h3&gt;
&lt;h4&gt;é”™è¯¯1: è·¯å¾„å†™é”™&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;// âŒ Windowsè·¯å¾„æ²¡æœ‰è½¬ä¹‰åæ–œæ 
cv::Mat img = cv::imread(&quot;C:\Users\image.jpg&quot;);

// âœ… æ­£ç¡®å†™æ³•ï¼ˆä¸‰ç§ä»»é€‰ï¼‰
cv::Mat img = cv::imread(&quot;C:\\Users\\image.jpg&quot;);     // è½¬ä¹‰åæ–œæ 
cv::Mat img = cv::imread(&quot;C:/Users/image.jpg&quot;);       // ä½¿ç”¨æ­£æ–œæ 
cv::Mat img = cv::imread(R&quot;(C:\Users\image.jpg)&quot;);    // åŸå§‹å­—ç¬¦ä¸²
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;é”™è¯¯2: å¿˜è®°æ£€æŸ¥empty()&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;// âŒ å±é™©ï¼å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåç»­æ“ä½œä¼šå´©æºƒ
cv::Mat img = cv::imread(&quot;not_exist.jpg&quot;);
cv::imshow(&quot;Window&quot;, img);  // ğŸ’¥ å´©æºƒ

// âœ… æ­£ç¡®å†™æ³•
cv::Mat img = cv::imread(&quot;not_exist.jpg&quot;);
if (img.empty()) {
    std::cerr &amp;lt;&amp;lt; &quot;æ–‡ä»¶ä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ”¯æŒ&quot; &amp;lt;&amp;lt; std::endl;
    return -1;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ’¡ é‡è¦çŸ¥è¯†ç‚¹&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;OpenCVè¯»å–çš„å›¾ç‰‡æ˜¯BGRæ ¼å¼ï¼Œä¸æ˜¯RGBï¼&lt;/strong&gt;&lt;br /&gt;
è¿™åœ¨åç»­é¢œè‰²è¯†åˆ«æ—¶éå¸¸é‡è¦ã€‚å¦‚æœä½ è¦è½¬RGBéœ€è¦ç”¨ &lt;code&gt;cv::cvtColor()&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;h2&gt;2. cv::imshow() - æ˜¾ç¤ºå›¾ç‰‡&lt;/h2&gt;
&lt;h3&gt;ğŸ“– å‡½æ•°åŸå‹&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;void cv::imshow(const String&amp;amp; winname, InputArray mat);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ“‹ å‚æ•°è¯´æ˜&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;winname&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;çª—å£åç§°ï¼ˆè‡ªå·±èµ·åï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;mat&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Mat&lt;/td&gt;
&lt;td&gt;è¦æ˜¾ç¤ºçš„å›¾åƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;ğŸ’» åŸºç¡€ç”¨æ³•&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;cv::Mat img = cv::imread(&quot;armor.jpg&quot;);

// æ˜¾ç¤ºå›¾ç‰‡
cv::imshow(&quot;åŸå›¾&quot;, img);

// âš ï¸ å¿…é¡»é…åˆwaitKey()ï¼Œå¦åˆ™çª—å£é—ªç°å³æ¶ˆå¤±ï¼
cv::waitKey(0);  // 0è¡¨ç¤ºæ— é™ç­‰å¾…ï¼Œç›´åˆ°æŒ‰ä»»æ„é”®

// å…³é—­æ‰€æœ‰çª—å£
cv::destroyAllWindows();
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ’» æ˜¾ç¤ºå¤šä¸ªçª—å£&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;cv::Mat img1 = cv::imread(&quot;red_armor.jpg&quot;);
cv::Mat img2 = cv::imread(&quot;blue_armor.jpg&quot;);

cv::imshow(&quot;çº¢æ–¹è£…ç”²æ¿&quot;, img1);
cv::imshow(&quot;è“æ–¹è£…ç”²æ¿&quot;, img2);

cv::waitKey(0);
cv::destroyAllWindows();
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;âš ï¸ å¸¸è§é”™è¯¯&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;// âŒ é”™è¯¯ï¼šçª—å£é—ªä¸€ä¸‹å°±æ¶ˆå¤±
cv::imshow(&quot;Window&quot;, img);
// ç¼ºå°‘ waitKey()

// âœ… æ­£ç¡®å†™æ³•
cv::imshow(&quot;Window&quot;, img);
cv::waitKey(0);
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h2&gt;3. cv::waitKey() - ç­‰å¾…æŒ‰é”®&lt;/h2&gt;
&lt;h3&gt;ğŸ“– å‡½æ•°åŸå‹&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;int cv::waitKey(int delay = 0);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ“‹ å‚æ•°è¯´æ˜&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;delay&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œ0è¡¨ç¤ºæ— é™ç­‰å¾…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰ä¸‹çš„é”®çš„ASCIIç ï¼Œè¶…æ—¶è¿”å›-1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;ğŸ’» å®ç”¨æŠ€å·§&lt;/h3&gt;
&lt;h4&gt;æŠ€å·§1: ç­‰å¾…ä»»æ„é”®&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;cv::imshow(&quot;Image&quot;, img);
cv::waitKey(0);  // æŒ‰ä»»æ„é”®ç»§ç»­
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;æŠ€å·§2: æ£€æµ‹ç‰¹å®šæŒ‰é”®&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;cv::imshow(&quot;Image&quot;, img);
int key = cv::waitKey(0);

if (key == 27) {  // ESCé”®
    std::cout &amp;lt;&amp;lt; &quot;ç”¨æˆ·å–æ¶ˆ&quot; &amp;lt;&amp;lt; std::endl;
} else if (key == &apos;s&apos; || key == &apos;S&apos;) {  // Sé”®
    cv::imwrite(&quot;saved.jpg&quot;, img);
    std::cout &amp;lt;&amp;lt; &quot;å›¾ç‰‡å·²ä¿å­˜&quot; &amp;lt;&amp;lt; std::endl;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;æŠ€å·§3: å®æ—¶è§†é¢‘æ˜¾ç¤ºï¼ˆ30fpsï¼‰&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;while (true) {
    cv::Mat frame = getFrame();  // è·å–ä¸€å¸§
    cv::imshow(&quot;Video&quot;, frame);
    
    // ç­‰å¾…33msï¼ˆçº¦30fpsï¼‰ï¼ŒæŒ‰ESCé€€å‡º
    if (cv::waitKey(33) == 27) break;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h2&gt;4. cv::Mat - å›¾åƒæ•°æ®ç±»å‹&lt;/h2&gt;
&lt;h3&gt;ğŸ“– æ ¸å¿ƒæ¦‚å¿µ&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;cv::Mat&lt;/code&gt; æ˜¯OpenCVçš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ª&lt;strong&gt;å¤šç»´æ•°ç»„&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2Då›¾åƒ = äºŒç»´çŸ©é˜µ&lt;/li&gt;
&lt;li&gt;å½©è‰²å›¾åƒ = ä¸‰ç»´çŸ©é˜µï¼ˆå®½Ã—é«˜Ã—é€šé“ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;ğŸ’» åˆ›å»ºMatå¯¹è±¡&lt;/h3&gt;
&lt;h4&gt;æ–¹æ³•1: é€šè¿‡imreadåˆ›å»º&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;cv::Mat img = cv::imread(&quot;image.jpg&quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;æ–¹æ³•2: åˆ›å»ºç©ºç™½å›¾åƒ&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;// åˆ›å»º640Ã—480çš„é»‘è‰²å›¾åƒ
cv::Mat black(480, 640, CV_8UC3, cv::Scalar(0, 0, 0));

// åˆ›å»ºç™½è‰²å›¾åƒ
cv::Mat white(480, 640, CV_8UC3, cv::Scalar(255, 255, 255));

// åˆ›å»ºçº¢è‰²å›¾åƒ
cv::Mat red(480, 640, CV_8UC3, cv::Scalar(0, 0, 255));  // BGRæ ¼å¼ï¼
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ“‹ å¸¸ç”¨å±æ€§&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;cv::Mat img = cv::imread(&quot;image.jpg&quot;);

// åŸºæœ¬ä¿¡æ¯
int width = img.cols;      // å®½åº¦ï¼ˆåˆ—æ•°ï¼‰
int height = img.rows;     // é«˜åº¦ï¼ˆè¡Œæ•°ï¼‰
int channels = img.channels();  // é€šé“æ•°ï¼ˆ1=ç°åº¦ï¼Œ3=å½©è‰²ï¼‰
bool isEmpty = img.empty();     // æ˜¯å¦ä¸ºç©º

// æ•°æ®ç±»å‹
int type = img.type();     // CV_8UC3 ç­‰
int depth = img.depth();   // CV_8U ç­‰

// å†…å­˜ä¿¡æ¯
size_t total = img.total();    // æ€»åƒç´ æ•° = rows Ã— cols
size_t bytes = img.total() * img.elemSize();  // å ç”¨å­—èŠ‚æ•°
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ’» è®¿é—®åƒç´ å€¼&lt;/h3&gt;
&lt;h4&gt;æ–¹æ³•1: atè®¿é—®ï¼ˆå®‰å…¨ä½†æ…¢ï¼‰&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;cv::Mat img = cv::imread(&quot;image.jpg&quot;);

// è®¿é—®(100, 200)ä½ç½®çš„åƒç´ 
cv::Vec3b pixel = img.at&amp;lt;cv::Vec3b&amp;gt;(100, 200);
uchar blue = pixel[0];
uchar green = pixel[1];
uchar red = pixel[2];

// ä¿®æ”¹åƒç´ 
img.at&amp;lt;cv::Vec3b&amp;gt;(100, 200) = cv::Vec3b(255, 0, 0);  // è®¾ä¸ºè“è‰²
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;æ–¹æ³•2: æŒ‡é’ˆè®¿é—®ï¼ˆå¿«ä½†éœ€å°å¿ƒï¼‰&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;for (int y = 0; y &amp;lt; img.rows; y++) {
    uchar* row = img.ptr&amp;lt;uchar&amp;gt;(y);  // è·å–ç¬¬yè¡Œçš„æŒ‡é’ˆ
    for (int x = 0; x &amp;lt; img.cols; x++) {
        uchar b = row[x * 3 + 0];
        uchar g = row[x * 3 + 1];
        uchar r = row[x * 3 + 2];
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ“‹ Matç±»å‹ä»£ç è¯´æ˜&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;// CV_&amp;lt;bit-depth&amp;gt;{U|S|F}C&amp;lt;channels&amp;gt;
CV_8UC1   // 8ä½æ— ç¬¦å·ï¼Œ1é€šé“ï¼ˆç°åº¦å›¾ï¼‰
CV_8UC3   // 8ä½æ— ç¬¦å·ï¼Œ3é€šé“ï¼ˆBGRå½©è‰²å›¾ï¼‰
CV_32FC1  // 32ä½æµ®ç‚¹ï¼Œ1é€šé“
CV_16SC3  // 16ä½æœ‰ç¬¦å·ï¼Œ3é€šé“
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h2&gt;5. cv::imwrite() - ä¿å­˜å›¾ç‰‡&lt;/h2&gt;
&lt;h3&gt;ğŸ“– å‡½æ•°åŸå‹&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;bool cv::imwrite(const String&amp;amp; filename, InputArray img);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ’» åŸºç¡€ç”¨æ³•&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;cv::Mat img = cv::imread(&quot;input.jpg&quot;);

// å¤„ç†å›¾åƒ...

// ä¿å­˜ä¸ºJPGï¼ˆæœ‰æŸå‹ç¼©ï¼‰
cv::imwrite(&quot;output.jpg&quot;, img);

// ä¿å­˜ä¸ºPNGï¼ˆæ— æŸå‹ç¼©ï¼Œæ¨èä¿å­˜äºŒå€¼å›¾ï¼‰
cv::imwrite(&quot;binary.png&quot;, binaryImg);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ’» è®¾ç½®å‹ç¼©è´¨é‡&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;// JPGè´¨é‡æ§åˆ¶ï¼ˆ0-100ï¼Œé»˜è®¤95ï¼‰
std::vector&amp;lt;int&amp;gt; jpg_params;
jpg_params.push_back(cv::IMWRITE_JPEG_QUALITY);
jpg_params.push_back(90);  // è´¨é‡90%
cv::imwrite(&quot;output.jpg&quot;, img, jpg_params);

// PNGå‹ç¼©çº§åˆ«ï¼ˆ0-9ï¼Œé»˜è®¤3ï¼‰
std::vector&amp;lt;int&amp;gt; png_params;
png_params.push_back(cv::IMWRITE_PNG_COMPRESSION);
png_params.push_back(9);  // æœ€å¤§å‹ç¼©
cv::imwrite(&quot;output.png&quot;, img, png_params);
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h2&gt;6. cv::VideoCapture - æ‰“å¼€ç›¸æœº/è§†é¢‘&lt;/h2&gt;
&lt;h3&gt;ğŸ“– å‡½æ•°åŸå‹&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;cv::VideoCapture cap(int device);         // æ‰“å¼€ç›¸æœº
cv::VideoCapture cap(const String&amp;amp; filename);  // æ‰“å¼€è§†é¢‘æ–‡ä»¶
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ’» æ‰“å¼€ç›¸æœº&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;lt;opencv2/opencv.hpp&amp;gt;

int main() {
    // æ‰“å¼€é»˜è®¤ç›¸æœºï¼ˆè®¾å¤‡ID=0ï¼‰
    cv::VideoCapture cap(0);
    
    // æ£€æŸ¥æ˜¯å¦æˆåŠŸæ‰“å¼€
    if (!cap.isOpened()) {
        std::cerr &amp;lt;&amp;lt; &quot;âŒ ç›¸æœºæ‰“å¼€å¤±è´¥&quot; &amp;lt;&amp;lt; std::endl;
        return -1;
    }
    
    // è®¾ç½®ç›¸æœºå‚æ•°ï¼ˆå¯é€‰ï¼‰
    cap.set(cv::CAP_PROP_FRAME_WIDTH, 1280);
    cap.set(cv::CAP_PROP_FRAME_HEIGHT, 720);
    cap.set(cv::CAP_PROP_FPS, 60);
    
    cv::Mat frame;
    while (true) {
        // è¯»å–ä¸€å¸§
        cap.read(frame);
        // æˆ–è€…: cap &amp;gt;&amp;gt; frame;
        
        if (frame.empty()) {
            std::cerr &amp;lt;&amp;lt; &quot;âŒ æ— æ³•è¯»å–å¸§&quot; &amp;lt;&amp;lt; std::endl;
            break;
        }
        
        // æ˜¾ç¤º
        cv::imshow(&quot;Camera&quot;, frame);
        
        // æŒ‰ESCé€€å‡º
        if (cv::waitKey(30) == 27) break;
    }
    
    cap.release();
    cv::destroyAllWindows();
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ğŸ’» è¯»å–è§†é¢‘æ–‡ä»¶&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;cv::VideoCapture cap(&quot;video.mp4&quot;);

if (!cap.isOpened()) {
    std::cerr &amp;lt;&amp;lt; &quot;è§†é¢‘æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot; &amp;lt;&amp;lt; std::endl;
    return -1;
}

// è·å–è§†é¢‘ä¿¡æ¯
int fps = cap.get(cv::CAP_PROP_FPS);
int width = cap.get(cv::CAP_PROP_FRAME_WIDTH);
int height = cap.get(cv::CAP_PROP_FRAME_HEIGHT);
int frame_count = cap.get(cv::CAP_PROP_FRAME_COUNT);

std::cout &amp;lt;&amp;lt; &quot;è§†é¢‘ä¿¡æ¯: &quot; &amp;lt;&amp;lt; width &amp;lt;&amp;lt; &quot;x&quot; &amp;lt;&amp;lt; height 
          &amp;lt;&amp;lt; &quot; @ &quot; &amp;lt;&amp;lt; fps &amp;lt;&amp;lt; &quot;fps, å…±&quot; &amp;lt;&amp;lt; frame_count &amp;lt;&amp;lt; &quot;å¸§&quot; &amp;lt;&amp;lt; std::endl;

cv::Mat frame;
while (cap.read(frame)) {
    cv::imshow(&quot;Video&quot;, frame);
    if (cv::waitKey(1000/fps) == 27) break;  // æŒ‰åŸé€Ÿæ’­æ”¾
}
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h2&gt;ğŸ¯ æœ¬é˜¶æ®µå®æˆ˜ç»ƒä¹ &lt;/h2&gt;
&lt;h3&gt;ç»ƒä¹ 1: å›¾ç‰‡æŸ¥çœ‹å™¨&lt;/h3&gt;
&lt;p&gt;ç¼–å†™ä¸€ä¸ªç®€å•çš„å›¾ç‰‡æŸ¥çœ‹å™¨ï¼Œæ”¯æŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯»å–å¹¶æ˜¾ç¤ºå›¾ç‰‡&lt;/li&gt;
&lt;li&gt;æŒ‰ &lt;code&gt;s&lt;/code&gt; ä¿å­˜å›¾ç‰‡å‰¯æœ¬&lt;/li&gt;
&lt;li&gt;æŒ‰ &lt;code&gt;ESC&lt;/code&gt; é€€å‡º&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&amp;lt;details&amp;gt;
&amp;lt;summary&amp;gt;ğŸ’¡ å‚è€ƒç­”æ¡ˆ&amp;lt;/summary&amp;gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;lt;opencv2/opencv.hpp&amp;gt;
#include &amp;lt;iostream&amp;gt;

int main(int argc, char** argv) {
    if (argc &amp;lt; 2) {
        std::cout &amp;lt;&amp;lt; &quot;ç”¨æ³•: &quot; &amp;lt;&amp;lt; argv[0] &amp;lt;&amp;lt; &quot; &amp;lt;image_path&amp;gt;&quot; &amp;lt;&amp;lt; std::endl;
        return -1;
    }
    
    cv::Mat img = cv::imread(argv[1]);
    if (img.empty()) {
        std::cerr &amp;lt;&amp;lt; &quot;æ— æ³•è¯»å–å›¾ç‰‡: &quot; &amp;lt;&amp;lt; argv[1] &amp;lt;&amp;lt; std::endl;
        return -1;
    }
    
    std::cout &amp;lt;&amp;lt; &quot;æŒ‰ &apos;s&apos; ä¿å­˜, æŒ‰ ESC é€€å‡º&quot; &amp;lt;&amp;lt; std::endl;
    
    while (true) {
        cv::imshow(&quot;å›¾ç‰‡æŸ¥çœ‹å™¨&quot;, img);
        int key = cv::waitKey(0);
        
        if (key == 27) {  // ESC
            break;
        } else if (key == &apos;s&apos; || key == &apos;S&apos;) {
            cv::imwrite(&quot;saved.jpg&quot;, img);
            std::cout &amp;lt;&amp;lt; &quot;å·²ä¿å­˜åˆ° saved.jpg&quot; &amp;lt;&amp;lt; std::endl;
        }
    }
    
    cv::destroyAllWindows();
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;lt;/details&amp;gt;&lt;/p&gt;
&lt;h3&gt;ç»ƒä¹ 2: ç›¸æœºå®æ—¶é¢„è§ˆ&lt;/h3&gt;
&lt;p&gt;å®ç°ä¸€ä¸ªç›¸æœºé¢„è§ˆç¨‹åºï¼Œæ˜¾ç¤ºå½“å‰FPS&lt;/p&gt;
&lt;p&gt;&amp;lt;details&amp;gt;
&amp;lt;summary&amp;gt;ğŸ’¡ å‚è€ƒç­”æ¡ˆ&amp;lt;/summary&amp;gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;lt;opencv2/opencv.hpp&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;chrono&amp;gt;

int main() {
    cv::VideoCapture cap(0);
    if (!cap.isOpened()) {
        std::cerr &amp;lt;&amp;lt; &quot;ç›¸æœºæ‰“å¼€å¤±è´¥&quot; &amp;lt;&amp;lt; std::endl;
        return -1;
    }
    
    cv::Mat frame;
    auto last_time = std::chrono::high_resolution_clock::now();
    double fps = 0;
    
    while (true) {
        cap &amp;gt;&amp;gt; frame;
        if (frame.empty()) break;
        
        // è®¡ç®—FPS
        auto current_time = std::chrono::high_resolution_clock::now();
        double elapsed = std::chrono::duration&amp;lt;double&amp;gt;(current_time - last_time).count();
        fps = 1.0 / elapsed;
        last_time = current_time;
        
        // åœ¨å›¾åƒä¸Šç»˜åˆ¶FPS
        std::string fps_text = &quot;FPS: &quot; + std::to_string(int(fps));
        cv::putText(frame, fps_text, cv::Point(10, 30),
                    cv::FONT_HERSHEY_SIMPLEX, 1, cv::Scalar(0, 255, 0), 2);
        
        cv::imshow(&quot;Camera Preview&quot;, frame);
        if (cv::waitKey(1) == 27) break;
    }
    
    cap.release();
    cv::destroyAllWindows();
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;lt;/details&amp;gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;âœ… æ£€æŸ¥æ¸…å•&lt;/h2&gt;
&lt;p&gt;å®Œæˆæœ¬é˜¶æ®µåï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;[ ] ç”¨ &lt;code&gt;cv::imread()&lt;/code&gt; è¯»å–å›¾ç‰‡å¹¶æ£€æŸ¥æ˜¯å¦æˆåŠŸ&lt;/li&gt;
&lt;li&gt;[ ] ç”¨ &lt;code&gt;cv::imshow()&lt;/code&gt; å’Œ &lt;code&gt;cv::waitKey()&lt;/code&gt; æ˜¾ç¤ºå›¾ç‰‡&lt;/li&gt;
&lt;li&gt;[ ] ç†è§£Matå¯¹è±¡çš„åŸºæœ¬å±æ€§ï¼ˆrows, cols, channelsï¼‰&lt;/li&gt;
&lt;li&gt;[ ] ç”¨ &lt;code&gt;cv::imwrite()&lt;/code&gt; ä¿å­˜å¤„ç†ç»“æœ&lt;/li&gt;
&lt;li&gt;[ ] ç”¨ &lt;code&gt;cv::VideoCapture&lt;/code&gt; æ‰“å¼€ç›¸æœºå¹¶å®æ—¶æ˜¾ç¤º&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;ğŸ“š ä¸‹ä¸€æ­¥&lt;/h2&gt;
&lt;p&gt;å®Œæˆæœ¬é˜¶æ®µåï¼Œç»§ç»­å­¦ä¹ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;[02-é¢œè‰²æå–]&lt;/strong&gt; - å¦‚ä½•æå–çº¢/è“è‰²ç¯æ¡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;[04-è½®å»“æ£€æµ‹]&lt;/strong&gt; - å¦‚ä½•æ‰¾åˆ°ç¯æ¡çš„ä½ç½®&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;ğŸ”— å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.opencv.org/4.x/d4/da8/group__imgcodecs.html#ga288b8b3da0892bd651fce07b3bbd3a56&quot;&gt;OpenCVå®˜æ–¹æ–‡æ¡£ - imread&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.opencv.org/4.x/d3/d63/classcv_1_1Mat.html&quot;&gt;OpenCVå®˜æ–¹æ–‡æ¡£ - Mat&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.opencv.org/4.x/d8/dfe/classcv_1_1VideoCapture.html&quot;&gt;OpenCVå®˜æ–¹æ–‡æ¡£ - VideoCapture&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content:encoded></item><item><title>æ›´æ–°æ—¥å¿—</title><link>https://www.nanye404.top/posts/%E6%97%A5%E5%BF%97/</link><guid isPermaLink="true">https://www.nanye404.top/posts/%E6%97%A5%E5%BF%97/</guid><description>è¿™é‡Œæ˜¯æ›´æ–°æ—¥å¿—</description><pubDate>Wed, 22 Oct 2025 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;2025-10-22&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æ›´æ–°äº†ä¸ªäººç®€ä»‹&lt;/li&gt;
&lt;li&gt;æ›´æ–°äº†rmç¬”è®°&lt;/li&gt;
&lt;li&gt;æ›´æ–°äº†åŒæŒ‡é’ˆçš„æ¡†æ¶&lt;/li&gt;
&lt;li&gt;è¯„è®ºæ²¡æŒ‚æœåŠ¡å™¨æ‰€ä»¥ä¸èƒ½ç”¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;2025-10-23&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æ›´æ–°äº†å¿«æ…¢æŒ‡é’ˆ&lt;/li&gt;
&lt;/ul&gt;
</content:encoded></item><item><title>åŒæŒ‡é’ˆ</title><link>https://www.nanye404.top/posts/twop/</link><guid isPermaLink="true">https://www.nanye404.top/posts/twop/</guid><description>åŒæŒ‡é’ˆå¸¸è§æŠ€å·§</description><pubDate>Wed, 22 Oct 2025 00:00:00 GMT</pubDate><content:encoded>&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%8F%8C%E6%8C%87%E9%92%88%E5%9C%A8%E6%95%B0%E7%BB%84%E7%9A%84%E8%BF%90%E7%94%A8&quot;&gt;åŒæŒ‡é’ˆåœ¨æ•°ç»„çš„è¿ç”¨&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%BF%AB%E6%85%A2%E6%8C%87%E9%92%88&quot;&gt;å¿«æ…¢æŒ‡é’ˆ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2&quot;&gt;äºŒåˆ†æœç´¢&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3&quot;&gt;æ»‘åŠ¨çª—å£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%9B%9E%E6%96%87/%E5%8F%8D%E8%BD%AC&quot;&gt;å›æ–‡/åè½¬&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%95%B0%E4%B9%8B%E5%92%8C&quot;&gt;æ•°ä¹‹å’Œ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%8F%8C%E6%8C%87%E9%92%88%E5%9C%A8%E9%93%BE%E8%A1%A8%E7%9A%84%E8%BF%90%E7%94%A8&quot;&gt;åŒæŒ‡é’ˆåœ¨é“¾è¡¨çš„è¿ç”¨&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%90%88%E5%B9%B6&quot;&gt;åˆå¹¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%88%86%E8%A7%A3&quot;&gt;åˆ†è§£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%85%B6%E4%BB%96&quot;&gt;å…¶ä»–&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%80%BB%E7%BB%93&quot;&gt;æ€»ç»“&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;åŒæŒ‡é’ˆåœ¨æ•°ç»„çš„è¿ç”¨&lt;/h2&gt;
&lt;hr /&gt;
&lt;h2&gt;å¿«æ…¢æŒ‡é’ˆ&lt;/h2&gt;
&lt;h3&gt;æ•°ç»„çš„åŸåœ°ä¿®æ”¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åŠ›æ‰£ç¬¬ 26 é¢˜ã€Œåˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ã€ï¼Œè®©ä½ åœ¨æœ‰åºæ•°ç»„å»é‡ï¼š
https://leetcode.cn/problems/remove-duplicates-from-sorted-array/&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;ul&gt;
&lt;li&gt;ç»™ä½ ä¸€ä¸ª&lt;strong&gt;éä¸¥æ ¼é€’å¢æ’åˆ—&lt;/strong&gt;çš„æ•°ç»„&lt;code&gt;nums&lt;/code&gt; ï¼Œè¯·ä½ &lt;strong&gt;åŸåœ°&lt;/strong&gt;åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´ &lt;strong&gt;åªå‡ºç°ä¸€æ¬¡&lt;/strong&gt;ï¼Œè¿”å›åˆ é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚å…ƒç´ çš„&lt;strong&gt;ç›¸å¯¹é¡ºåº&lt;/strong&gt;åº”è¯¥ä¿æŒ&lt;strong&gt;ä¸€è‡´&lt;/strong&gt;ã€‚ç„¶åè¿”å› &lt;code&gt;nums&lt;/code&gt; ä¸­å”¯ä¸€å…ƒç´ çš„ä¸ªæ•°ã€‚&lt;/li&gt;
&lt;li&gt;è€ƒè™‘ &lt;code&gt;nums &lt;/code&gt;çš„å”¯ä¸€å…ƒç´ çš„æ•°é‡ä¸º &lt;code&gt;k&lt;/code&gt;ã€‚å»é‡åï¼Œè¿”å›å”¯ä¸€å…ƒç´ çš„æ•°é‡ kã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nums&lt;/code&gt; çš„å‰ k ä¸ªå…ƒç´ åº”åŒ…å« æ’åºå çš„å”¯ä¸€æ•°å­—ã€‚ä¸‹æ ‡ &lt;code&gt;k - 1 &lt;/code&gt;ä¹‹åçš„å‰©ä½™å…ƒç´ å¯ä»¥å¿½ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åˆ¤é¢˜æ ‡å‡†:&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿä¼šç”¨ä¸‹é¢çš„ä»£ç æ¥æµ‹è¯•ä½ çš„é¢˜è§£:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;int[] nums = [...]; // è¾“å…¥æ•°ç»„
int[] expectedNums = [...]; // é•¿åº¦æ­£ç¡®çš„æœŸæœ›ç­”æ¡ˆ
int k = removeDuplicates(nums); // è°ƒç”¨
assert k == expectedNums.length;
for (int i = 0; i &amp;lt; k; i++) {
    assert nums[i] == expectedNums[i];
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¦‚æœæ‰€æœ‰æ–­è¨€éƒ½é€šè¿‡ï¼Œé‚£ä¹ˆæ‚¨çš„é¢˜è§£å°†è¢«&lt;strong&gt;é€šè¿‡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ 1ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;è¾“å…¥ï¼šnums = [1,1,2]
è¾“å‡ºï¼š2, nums = [1,2,_]
è§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 2 ï¼Œå¹¶ä¸”åŸæ•°ç»„ nums çš„å‰ä¸¤ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 1, 2 ã€‚ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç¤ºä¾‹ 2ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;è¾“å…¥ï¼šnums = [0,0,1,1,1,2,2,3,3,4]
è¾“å‡ºï¼š5, nums = [0,1,2,3,4,_,_,_,_,_]
è§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 5 ï¼Œ å¹¶ä¸”åŸæ•°ç»„ nums çš„å‰äº”ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 0, 1, 2, 3, 4 ã€‚ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸåœ°&lt;/strong&gt;æ„å‘³ç€åªèƒ½å¯¹å½“å‰æ•°ç»„è¿›è¡Œä¿®æ”¹ï¼Œä¸èƒ½æ–°å»ºä¸€ä¸ªæ•°ç»„&lt;/li&gt;
&lt;li&gt;è¿™é‡Œæ‰€éœ€è¦ç”¨åˆ°çš„å°±æ˜¯&lt;strong&gt;å¿«æ…¢æŒ‡é’ˆ&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªå¿«æŒ‡é’ˆå»è¯†åˆ«ï¼Œå¦ä¸€ä¸ªæ…¢æŒ‡é’ˆå»æ“ä½œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;  è¿™é‡ŒæŒ‡é’ˆæ˜¯å¹¿ä¹‰ä¸Šçš„æŒ‡é’ˆï¼Œæ•°ç»„çš„ç´¢å¼•ä¹Ÿå¯ä»¥æ˜¯&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;fast&lt;/code&gt; é‡åˆ°å€¼ä¸º &lt;code&gt;val &lt;/code&gt;çš„å…ƒç´ ï¼Œåˆ™ç›´æ¥è·³è¿‡ï¼Œå¦åˆ™å°±èµ‹å€¼ç»™ &lt;code&gt;slow&lt;/code&gt; æŒ‡é’ˆï¼Œå¹¶è®© &lt;code&gt;slow &lt;/code&gt;å‰è¿›ä¸€æ­¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…·ä½“ä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;class Solution {
public:
    int removeDuplicates(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        if (nums.empty()) return 0;

        int slow = 0;
        for (int fast = 1; fast &amp;lt; nums.size(); fast++) {
            if (nums[slow] != nums[fast]) {
                slow++;
                nums[slow] = nums[fast];
            }
        }

        return slow + 1;
    }
};
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;æ³¨æ„è¿™é‡Œéœ€è¦&lt;strong&gt;å…ˆ&lt;code&gt;slow++&lt;/code&gt;å†èµ‹å€¼&lt;/strong&gt;ï¼Œè¦ä¸ç„¶ç¬¬ä¸€ä¸ªä¼šè¢«åæ‰&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;ul&gt;
&lt;li&gt;ä¸‹é¢ä¸€é“é¢˜ä¹Ÿæ˜¯å¿«æ…¢æŒ‡é’ˆçš„æ€æƒ³ï¼Œå¦‚æœæŒæ¡äº†å‰ä¸€é“é¢˜ï¼Œè¿™é¢˜ä¼šå¾ˆç®€å•&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ›æ‰£283ç§»åŠ¨0&lt;/strong&gt;https://leetcode.cn/problems/move-zeroes/&lt;/li&gt;
&lt;li&gt;ç»™å®šä¸€ä¸ªæ•°ç»„ &lt;strong&gt;nums&lt;/strong&gt;ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ 0 ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚&lt;/li&gt;
&lt;li&gt;è¯·æ³¨æ„ ï¼Œå¿…é¡»åœ¨ä¸å¤åˆ¶æ•°ç»„çš„æƒ…å†µä¸‹åŸåœ°å¯¹æ•°ç»„è¿›è¡Œæ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¤ºä¾‹ 1:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;è¾“å…¥: nums = [0,1,0,3,12]
è¾“å‡º: [1,3,12,0,0]
ç¤ºä¾‹ 2:
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;è¾“å…¥: nums = [0]
è¾“å‡º: [0]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæˆ‘å°±ç›´æ¥ä¸Šä»£ç äº†&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;class Solution {
public:
    void moveZeroes(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        int slow = 0;  // æŒ‡å‘ä¸‹ä¸€ä¸ªéé›¶åº”æ”¾ç½®çš„ä½ç½®
        for (int fast = 0; fast &amp;lt; nums.size(); fast++) {
            if (nums[fast] != 0) {
                nums[slow] = nums[fast];
                slow++;
            }
        }

        // slow ä¹‹åçš„å…¨éƒ¨ç½®ä¸º 0
        for (int i = slow; i &amp;lt; nums.size(); i++) {
            nums[i] = 0;
        }
    }
};

&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h2&gt;äºŒåˆ†æœç´¢&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬éƒ½ç©è¿‡çš„çŒœæ•°å­—æ¸¸æˆä¸­ï¼Œç”¨çš„å°±æ˜¯äºŒåˆ†æœç´ çš„æŠ€å·§&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆçœ‹æœ€ç¬¨çš„é¡ºåºæŸ¥æ‰¾ï¼Œæˆ‘ä»¬ä»1-100éå†å…¨éƒ¨æ•°å­—ï¼Œè™½ç„¶è¯´è¿æ°”å¥½å¯èƒ½ä¸€ä¸‹ä¼šçŒœä¸­ï¼Œä½†æ˜¯æœŸæœ›çš„æ¬¡æ•°è¿˜æ˜¯å¾ˆå¤šï¼Œå¤æ‚åº¦ä¸ºO(n)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœæ˜¯å‡­æ„Ÿè§‰æ‰¾ï¼Œä¸€æ ·è¿˜æ˜¯è¦çœ‹è¿æ°”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœç¬¬ä¸€æ¬¡çŒœ50ï¼Œç„¶åç»§ç»­ä¸€åŠä¸€åŠç¼©å°åŒºé—´ï¼Œæœ€åä¹Ÿèƒ½åœ¨7æ¬¡å†…è§£å†³&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚ä½•æ•°å­—æ¥åˆ°1-1000000ï¼ŒäºŒåˆ†æœç´¢æœ€å20æ¬¡å°±èƒ½æ‰¾åˆ°ç­”æ¡ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;äºŒåˆ†æœç´¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log  N)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æœ€åŸºæœ¬ä»£ç &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;int binarySearch(vector&amp;lt;int&amp;gt;&amp;amp; nums, int target) {
    // ä¸€å·¦ä¸€å³ä¸¤ä¸ªæŒ‡é’ˆç›¸å‘è€Œè¡Œ
    int left = 0, right = nums.size() - 1;
    while(left &amp;lt;= right) {
        int mid = (right + left) / 2;
        if(nums[mid] == target)
            return mid; 
        else if (nums[mid] &amp;lt; target)
            left = mid + 1; 
        else if (nums[mid] &amp;gt; target)
            right = mid - 1;
    }
    return -1;
}
&lt;/code&gt;&lt;/pre&gt;
</content:encoded></item><item><title>è£…ç”²æ¿è‡ªåŠ¨è¯†åˆ«ä¸ä½å§¿ä¼°è®¡å­¦ä¹ </title><link>https://www.nanye404.top/posts/armor/</link><guid isPermaLink="true">https://www.nanye404.top/posts/armor/</guid><description>ä¸€äº›å°ç¬”è®°</description><pubDate>Wed, 22 Oct 2025 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;ç›®å½•&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%80%BB%E8%A7%88%E7%B3%BB%E7%BB%9F%E5%81%9A%E7%9A%84%E4%BA%8B%E6%83%85%E6%98%AF%E4%BB%80%E4%B9%88&quot;&gt;æ€»è§ˆï¼šç³»ç»Ÿåšçš„äº‹æƒ…æ˜¯ä»€ä¹ˆ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%85%B3%E9%94%AE%E7%9F%A5%E8%AF%86%E7%82%B9%E9%80%9F%E9%80%9A&quot;&gt;å…³é”®çŸ¥è¯†ç‚¹é€Ÿé€š&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E7%AB%AF%E5%88%B0%E7%AB%AF%E6%B5%81%E7%A8%8B%E5%9B%BE%E4%B8%80%E5%B8%A7%E5%9B%BE%E5%83%8F%E5%A6%82%E4%BD%95%E8%A2%AB%E5%A4%84%E7%90%86&quot;&gt;ç«¯åˆ°ç«¯æµç¨‹å›¾ï¼ˆä¸€å¸§å›¾åƒå¦‚ä½•è¢«å¤„ç†ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%A8%A1%E5%9D%97%E9%80%90%E4%B8%AA%E6%8B%86%E8%A7%A3%E5%90%AB%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5&quot;&gt;æ¨¡å—é€ä¸ªæ‹†è§£ï¼ˆå«æ ¸å¿ƒä»£ç ç‰‡æ®µï¼‰&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;4.1 æ•°å­—åˆ†ç±»å™¨ &lt;code&gt;NumberClassifier&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;4.2 è§†è§‰æ£€æµ‹å™¨ &lt;code&gt;Detector&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;4.3 ç¯æ¡è§’ç‚¹ç²¾ä¿® &lt;code&gt;LightCornerCorrector&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;4.4 ä½å§¿ä¼°è®¡ &lt;code&gt;ArmorPoseEstimator&lt;/code&gt;ï¼ˆPnP + BAï¼‰&lt;/li&gt;
&lt;li&gt;4.5 BA ä¼˜åŒ–å™¨ä¸å›¾ä¼˜åŒ–ç®—å­ &lt;code&gt;BaSolver&lt;/code&gt; / &lt;code&gt;GraphOptimizer&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;4.6 ROS2 èŠ‚ç‚¹ &lt;code&gt;ArmorDetectorNode&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%8F%82%E6%95%B0%E5%A6%82%E4%BD%95%E5%BD%B1%E5%93%8D%E6%95%88%E6%9E%9C%E8%B0%83%E5%8F%82%E6%8C%87%E5%8D%97&quot;&gt;å‚æ•°å¦‚ä½•å½±å“æ•ˆæœï¼ˆè°ƒå‚æŒ‡å—ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%AE%9E%E6%88%98%E4%BB%8E%E6%BA%90%E7%A0%81%E5%88%B0%E8%BF%90%E8%A1%8C%E4%B8%8E%E5%8F%AF%E8%A7%86%E5%8C%96&quot;&gt;å®æˆ˜ï¼šä»æºç åˆ°è¿è¡Œä¸å¯è§†åŒ–&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E5%AE%9A%E4%BD%8D%E6%80%9D%E8%B7%AF&quot;&gt;å¸¸è§é—®é¢˜ä¸å®šä½æ€è·¯&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E8%BF%9B%E9%98%B6%E7%BB%83%E4%B9%A0%E9%A2%98%E5%B8%A6%E6%96%B9%E5%90%91%E6%8F%90%E7%A4%BA&quot;&gt;è¿›é˜¶ç»ƒä¹ é¢˜ï¼ˆå¸¦æ–¹å‘æç¤ºï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%9C%AF%E8%AF%AD%E4%B8%8E%E5%9D%90%E6%A0%87%E7%B3%BB%E5%B0%8F%E6%8A%84&quot;&gt;æœ¯è¯­ä¸åæ ‡ç³»å°æŠ„&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr /&gt;
&lt;h2&gt;æ€»è§ˆï¼šç³»ç»Ÿåšçš„äº‹æƒ…æ˜¯ä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ç›®æ ‡&lt;/strong&gt;ï¼šä»ç›¸æœºæ¥çš„å½©è‰²å›¾åƒä¸­ï¼Œè‡ªåŠ¨æ‰¾å‡ºâ€œ&lt;strong&gt;ä¸¤æ ¹ç¯æ¡ç»„æˆçš„è£…ç”²æ¿&lt;/strong&gt;â€ï¼Œ&lt;strong&gt;è¯†åˆ«è£…ç”²æ•°å­—&lt;/strong&gt;ï¼Œå¹¶ä¼°è®¡è£…ç”²æ¿åœ¨&lt;strong&gt;ç›¸æœºåæ ‡ç³»&lt;/strong&gt;ä¸‹çš„ä¸‰ç»´ä½å§¿ï¼ˆä½ç½® + å§¿æ€ï¼‰ï¼Œæœ€åé€šè¿‡ &lt;strong&gt;ROS2&lt;/strong&gt; å‘å¸ƒç»“æœä¸å¯è§†åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®é˜¶æ®µ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å›¾åƒé¢„å¤„ç† â†’ äºŒå€¼åŒ–è½®å»“ â†’ &lt;strong&gt;ç¯æ¡å€™é€‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç¯æ¡å‡ ä½•ç­›é€‰ &amp;amp; é¢œè‰²åˆ¤å®š â†’ &lt;strong&gt;ç¯æ¡é…å¯¹æˆè£…ç”²æ¿&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é€è§†å±•å¼€ä¸­éƒ¨åŒºåŸŸ â†’ &lt;strong&gt;æ•°å­—åˆ†ç±»&lt;/strong&gt;ï¼ˆONNX æ¨¡å‹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹ç¯æ¡ä¸Šä¸‹è§’ç‚¹åš&lt;strong&gt;å‡ ä½•ç»†åŒ–&lt;/strong&gt;ï¼ˆæå‡ PnP ç¨³å®šæ€§ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨ &lt;strong&gt;PnP æ±‚åˆè§£&lt;/strong&gt; â†’ æ¡ä»¶å…è®¸æ—¶ç”¨ **BAï¼ˆä»…ä¼˜åŒ– yawï¼‰**åšå°ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;å°è£…ä¸º ROS2 èŠ‚ç‚¹ï¼š&lt;strong&gt;è®¢é˜…å›¾åƒ/ç›¸æœºå†…å‚/TF&lt;/strong&gt;ï¼Œå‘å¸ƒè°ƒè¯•å›¾åƒä¸ &lt;strong&gt;Marker&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr /&gt;
&lt;h2&gt;å…³é”®çŸ¥è¯†ç‚¹é€Ÿé€š&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&amp;lt;a href=&quot;/posts/rm_opencv_01/&quot;&amp;gt;å›¾åƒè¯»å–ä¸æ˜¾ç¤º&amp;lt;/a&amp;gt;&lt;/li&gt;
&lt;li&gt;&amp;lt;a href=&quot;/posts/rm_opencv_01/&quot;&amp;gt;æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« &amp;lt;/a&amp;gt;&lt;/li&gt;
&lt;li&gt;&amp;lt;a href=&quot;/posts/rm_opencv_01/&quot;&amp;gt;æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« &amp;lt;/a&amp;gt;&lt;/li&gt;
&lt;li&gt;&amp;lt;a href=&quot;/posts/rm_opencv_01/&quot;&amp;gt;æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« &amp;lt;/a&amp;gt;&lt;/li&gt;
&lt;li&gt;&amp;lt;a href=&quot;/posts/rm_opencv_01/&quot;&amp;gt;æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« &amp;lt;/a&amp;gt;&lt;/li&gt;
&lt;li&gt;&amp;lt;a href=&quot;/posts/rm_opencv_01/&quot;&amp;gt;æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« &amp;lt;/a&amp;gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;ç«¯åˆ°ç«¯æµç¨‹å›¾ï¼ˆä¸€å¸§å›¾åƒå¦‚ä½•è¢«å¤„ç†ï¼‰&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;Image(rgb8)
   â””â”€â–º é¢„å¤„ç†(ç°åº¦/é˜ˆå€¼)
          â””â”€â–º è½®å»“â†’ç¯æ¡(Light)
                 â””â”€â–º åŒè‰² + å‡ ä½•å…³ç³» â†’ è£…ç”²(Armor)
                        â”œâ”€â–º (å¯é€‰) ç¯æ¡è§’ç‚¹ç²¾ä¿®
                        â”œâ”€â–º é€è§†å±•å¼€æ•°å­—ROI â†’ äºŒå€¼åŒ– â†’ åˆ†ç±»
                        â””â”€â–º PnPæ±‚ä½å§¿ â†’ (å¯é€‰) BAä¼˜åŒ–yaw
                               â””â”€â–º å‘å¸ƒArmors + RViz Marker + è°ƒè¯•å›¾åƒ
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h2&gt;æ¨¡å—é€ä¸ªæ‹†è§£ï¼ˆå«æ ¸å¿ƒä»£ç ç‰‡æ®µï¼‰&lt;/h2&gt;
&lt;h3&gt;4.1 æ•°å­—åˆ†ç±»å™¨ &lt;code&gt;NumberClassifier&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;èŒè´£&lt;/strong&gt;ï¼šä»è£…ç”²æ¿ä¸¤æ ¹ç¯æ¡ä¹‹é—´è£å‡ºæ•°å­—å›¾ï¼ˆå›ºå®šå°ºå¯¸ï¼‰ï¼ŒäºŒå€¼åŒ–åå–‚ç»™ ONNX åˆ†ç±»ç½‘ç»œï¼Œå¾—åˆ°ç±»åˆ«ä¸ç½®ä¿¡åº¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒï¼šé€è§†å±•å¼€ + äºŒå€¼åŒ– + DNN å‰å‘&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// é€è§†å±•å¼€å¹¶è£ ROIï¼ˆå®½åº¦éšå¤§å°è£…ç”²è€Œå˜ï¼‰
cv::Mat NumberClassifier::extractNumber(const cv::Mat&amp;amp; src, const Armor&amp;amp; armor) const noexcept {
  static const int light_length = 12, warp_height = 28;
  static const int small_armor_width = 32, large_armor_width = 54;
  static const cv::Size roi_size(20, 28), input_size(28, 28);

  cv::Point2f lights_vertices[4] = {
    armor.left_light.bottom, armor.left_light.top,
    armor.right_light.top,   armor.right_light.bottom
  };
  const int top_light_y    = (warp_height - light_length) / 2 - 1;
  const int bottom_light_y = top_light_y + light_length;
  const int warp_width     = (armor.type == ArmorType::SMALL ? small_armor_width : large_armor_width);
  cv::Point2f target_vertices[4] = {
    {0, bottom_light_y}, {0, top_light_y},
    {warp_width - 1, top_light_y}, {warp_width - 1, bottom_light_y},
  };

  cv::Mat number_image, M = cv::getPerspectiveTransform(lights_vertices, target_vertices);
  cv::warpPerspective(src, number_image, M, cv::Size(warp_width, warp_height));

  // ä¸­éƒ¨ ROI â†’ ç°åº¦&amp;amp;OTSU â†’ 28x28
  number_image = number_image(cv::Rect((warp_width - roi_size.width) / 2, 0, roi_size.width, roi_size.height));
  cv::cvtColor(number_image, number_image, cv::COLOR_RGB2GRAY);
  cv::threshold(number_image, number_image, 0, 255, cv::THRESH_BINARY | cv::THRESH_OTSU);
  cv::resize(number_image, number_image, input_size);
  return number_image;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;// å‰å‘åˆ†ç±» + ç»“æœè§£ç 
void NumberClassifier::classify(const cv::Mat&amp;amp;, Armor&amp;amp; armor) noexcept {
  cv::Mat input = armor.number_img / 255.0;  // [0,1]
  cv::Mat blob; cv::dnn::blobFromImage(input, blob);
  mutex_.lock(); net_.setInput(blob); cv::Mat out = net_.forward().clone(); mutex_.unlock();

  double conf; cv::Point idp;
  minMaxLoc(out.reshape(1, 1), nullptr, &amp;amp;conf, nullptr, &amp;amp;idp);
  int label_id = idp.x;
  armor.confidence = conf;
  armor.number     = class_names_[label_id];
  armor.classfication_result = fmt::format(&quot;{}:{:.1f}%&quot;, armor.number, armor.confidence * 100.0);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;// è¿‡æ»¤ï¼šæŒ‰é˜ˆå€¼/å¿½ç•¥åˆ—è¡¨ + å¤§å°è£…ç”²ä¸ç±»åˆ«çš„äº’æ–¥è§„åˆ™
void NumberClassifier::eraseIgnoreClasses(std::vector&amp;lt;Armor&amp;gt;&amp;amp; armors) noexcept {
  armors.erase(std::remove_if(armors.begin(), armors.end(), [this](const Armor &amp;amp;a) {
    if (a.confidence &amp;lt; threshold) return true;
    for (auto&amp;amp; ig : ignore_classes_) if (a.number == ig) return true;

    bool mismatch = false;
    if (a.type == ArmorType::LARGE)  mismatch = (a.number == &quot;outpost&quot; || a.number == &quot;2&quot; || a.number == &quot;sentry&quot;);
    if (a.type == ArmorType::SMALL)  mismatch = (a.number == &quot;1&quot;      || a.number == &quot;base&quot;);
    return mismatch;
  }), armors.end());
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;è¦ç‚¹&lt;/strong&gt;ï¼šROI å®½åº¦ä¸è£…ç”²å°ºå¯¸åŒ¹é…ï¼›OTSU è®©é˜ˆå€¼æ›´ç¨³ï¼›&lt;code&gt;blobFromImage&lt;/code&gt; å°è£…å½’ä¸€åŒ–ä¸ NHWCâ†’NCHWã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h3&gt;4.2 è§†è§‰æ£€æµ‹å™¨ &lt;code&gt;Detector&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;èŒè´£&lt;/strong&gt;ï¼šç°åº¦/é˜ˆå€¼ â†’ è½®å»“ â†’ ç¯æ¡ï¼ˆå½¢çŠ¶ + å€¾è§’ï¼‰â†’ ç»Ÿè®¡é¢œè‰² â†’ å·¦å³åŒè‰²é…å¯¹ â†’ è£…ç”²ã€‚è‹¥æœ‰åˆ†ç±»å™¨ä¸è§’ç‚¹ä¿®æ­£å™¨ï¼Œåˆ™å¹¶è¡Œè¿›è¡Œæ•°å­—åˆ†ç±»ä¸è§’ç‚¹ç»†åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ€»ä½“æµç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;std::vector&amp;lt;Armor&amp;gt; Detector::detect(const cv::Mat&amp;amp; input) noexcept {
  binary_img = preprocessImage(input);               // ç°åº¦+å›ºå®šé˜ˆå€¼
  lights_    = findLights(input, binary_img);        // è½®å»“â†’Lightï¼ˆæ¯”ä¾‹/è§’åº¦/é¢œè‰²ï¼‰
  armors_    = matchLights(lights_);                 // å·¦å³é…å¯¹ â†’ Armor

  if (!armors_.empty() &amp;amp;&amp;amp; classifier) {
    std::for_each(std::execution::par, armors_.begin(), armors_.end(), [this,&amp;amp;input](Armor&amp;amp; a){
      a.number_img = classifier-&amp;gt;extractNumber(input, a);
      classifier-&amp;gt;classify(input, a);
      if (corner_corrector) corner_corrector-&amp;gt;correctCorners(a, gray_img_);
    });
    classifier-&amp;gt;eraseIgnoreClasses(armors_);
  }
  return armors_;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®åˆ¤å®šï¼šç¯æ¡ä¸é…å¯¹&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// ç¯æ¡ç­›é€‰ï¼šçŸ­é•¿è¾¹æ¯” + å€¾è§’
bool Detector::isLight(const Light&amp;amp; l) noexcept {
  float ratio = l.width / l.length;
  bool ratio_ok = light_params.min_ratio &amp;lt; ratio &amp;amp;&amp;amp; ratio &amp;lt; light_params.max_ratio;
  bool angle_ok = l.tilt_angle &amp;lt; light_params.max_angle;
  return ratio_ok &amp;amp;&amp;amp; angle_ok;
}

// é¢œè‰²ï¼šåœ¨è½®å»“åƒç´ ä¸­ç»Ÿè®¡R/Bå¼ºåº¦å·®ï¼ˆçº¢/è“ï¼‰
for (auto&amp;amp; pt: contour) { sum_r += rgb(pt)[0]; sum_b += rgb(pt)[2]; }
if (abs(sum_r - sum_b)/contour.size() &amp;gt; light_params.color_diff_thresh)
  light.color = (sum_r &amp;gt; sum_b ? RED : BLUE);

// å¤¹ç¯æ£€æµ‹ï¼šä¸¤ç¯æ¡å¤–æ¥çŸ©å½¢å†…æ˜¯å¦è¿˜â€œå¤¹â€ç€åˆ«çš„ç¯æ¡ï¼ˆä¸”æ’é™¤æ•°å­—/çº¢ç‚¹ç­‰å¹²æ‰°ï¼‰
bool containLight(int i, int j, const std::vector&amp;lt;Light&amp;gt;&amp;amp; lights);

// é…å¯¹ï¼šåŒè‰² + Xæ–¹å‘æ‰«æ + ä¸­å¿ƒè·çª—å£ï¼ˆåŒºåˆ†å¤§å°è£…ç”²ï¼‰+ ä¸¤ç¯æ¡é•¿åº¦ç›¸è¿‘ + å¤¹è§’é™åˆ¶
std::vector&amp;lt;Armor&amp;gt; Detector::matchLights(const std::vector&amp;lt;Light&amp;gt;&amp;amp; lights) noexcept;
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h3&gt;4.3 ç¯æ¡è§’ç‚¹ç²¾ä¿® &lt;code&gt;LightCornerCorrector&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;èŒè´£&lt;/strong&gt;ï¼šæ›´ç²¾ç¡®åœ°æ‰¾åˆ°æ¯æ ¹ç¯æ¡çš„&lt;strong&gt;ä¸Šä¸‹ç«¯ç‚¹&lt;/strong&gt;ä¸&lt;strong&gt;ä¸­å¿ƒ/è½´å‘&lt;/strong&gt;ï¼Œæå‡ PnP çš„ 2D-3D å¯¹åº”ç²¾åº¦ï¼ˆåœ¨äºŒå€¼åŒ–æˆ–å™ªå£°ç¯å¢ƒä¸‹å°¤å…¶æœ‰ç”¨ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•æ€è·¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä»¥ç¯æ¡å¤–æ¥æ¡†ä¸ºåŸºç¡€åš&lt;strong&gt;é€‚åº¦æ‰©å±•&lt;/strong&gt;å¹¶æ£€æŸ¥è¾¹ç•Œï¼›&lt;/li&gt;
&lt;li&gt;å¯¹è¯¥å°åŒºåŸŸåš&lt;strong&gt;é‡å¿ƒä¸ä¸»æ–¹å‘&lt;/strong&gt;ä¼°è®¡ï¼ˆäº®åº¦åŠ æƒ + PCA/ä¸€é˜¶çŸ©ï¼‰ï¼Œå¾—åˆ°&lt;strong&gt;å¯¹ç§°è½´&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;æ²¿å¯¹ç§°è½´çš„ä¸Šä¸‹æ–¹å‘ï¼Œä»¥å¤šä¸ªå¹³è¡Œâ€œæ‰«æçº¿â€å¯»æ‰¾&lt;strong&gt;äº®åº¦çªå˜æœ€å¤§&lt;/strong&gt;çš„ä½ç½®ä½œä¸ºç«¯ç‚¹å€™é€‰ï¼Œæœ€åæ±‚å¹³å‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;è¦ç‚¹ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// è§’ç‚¹ä¿®æ­£å…¥å£ï¼šå®½åº¦å¤ªå°åˆ™è·³è¿‡ï¼Œé¿å…å™ªå£°
void LightCornerCorrector::correctCorners(Armor&amp;amp; armor, const cv::Mat&amp;amp; gray) {
  constexpr int PASS_OPTIMIZE_WIDTH = 3;
  if (armor.left_light.width  &amp;gt; PASS_OPTIMIZE_WIDTH) { /* æ±‚ axis &amp;amp; è§’ç‚¹ */ }
  if (armor.right_light.width &amp;gt; PASS_OPTIMIZE_WIDTH) { /* æ±‚ axis &amp;amp; è§’ç‚¹ */ }
}

// æ²¿å¯¹ç§°è½´å¯»æ‰¾â€œäº®åº¦çªå˜æœ€å¤§â€çš„ç‚¹ä½œä¸ºè§’ç‚¹ï¼ˆå¤šæ¡å¹³è¡Œçº¿ï¼Œå–å€™é€‰å¹³å‡ï¼‰
cv::Point2f LightCornerCorrector::findCorner(const cv::Mat&amp;amp; gray, const Light&amp;amp; light,
                                             const SymmetryAxis&amp;amp; axis, std::string order) {
  // ... æ‰«æ START~END çš„å°æ®µï¼Œç´¯è®¡äº®åº¦å·®æœ€å¤§å¤„ ...
  // è¿”å›å‡å€¼ç‚¹ï¼›æ— å€™é€‰åˆ™è¿”å› (-1,-1)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h3&gt;4.4 ä½å§¿ä¼°è®¡ &lt;code&gt;ArmorPoseEstimator&lt;/code&gt;ï¼ˆPnP + BAï¼‰&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;èŒè´£&lt;/strong&gt;ï¼šæŠŠè£…ç”²å››è§’çš„ 2D åƒç´ ç‚¹ä¸å·²çŸ¥ 3D æ¨¡å‹ç‚¹ï¼ˆå¤§/å°è£…ç”²çš„çœŸå®å°ºå¯¸ï¼‰å¯¹åº”ï¼Œè§£å‡º R/tã€‚è‹¥ roll å°ä¸”å¼€å¯ BAï¼Œåˆ™è¿›ä¸€æ­¥ä»…åœ¨ &lt;strong&gt;yaw&lt;/strong&gt; ç»´è¿›è¡Œå›¾ä¼˜åŒ–ï¼Œä½¿æŠ•å½±è¯¯å·®æ›´å°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒæµç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// 1) PnP åˆè§£ï¼ˆsolvePnPGeneric å¯èƒ½è¿”å›ä¸¤ç»„è§£ï¼‰
if (pnp_solver_-&amp;gt;solvePnPGeneric(armor.landmarks(), rvecs, tvecs, type_name)) {
  sortPnPResult(armor, rvecs, tvecs);   // 2) è§£çš„é€‰æ‹©ï¼ˆè¯¯å·®/roll/ç¯æ¡å€¾è§’â†’yawæ­£è´Ÿï¼‰

  cv::Mat rmat; cv::Rodrigues(rvecs[0], rmat);
  Eigen::Matrix3d R = cvToEigen(rmat);
  Eigen::Vector3d t = cvToEigen(tvecs[0]);

  double roll = rotationMatrixToRPY(R_gimbal_camera_ * R)[0] * 180/M_PI;
  if (use_ba_ &amp;amp;&amp;amp; roll &amp;lt; 15) {
    // 3) BAï¼šä»…ä¼˜åŒ– yawï¼Œå°å¹…ä¿®æ­£ R ä»¥å‡å°æŠ•å½±è¯¯å·®
    R = ba_solver_-&amp;gt;solveBa(armor, t, R, R_imu_camera);
  }
  // 4) å¡«å……æ¶ˆæ¯ï¼ˆä½å§¿ + æ–‡æœ¬ï¼‰
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ä¸¤è§£é€‰æ‹©ï¼ˆç›´è§‰ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…ˆçœ‹&lt;strong&gt;é‡æŠ•å½±è¯¯å·®&lt;/strong&gt;ä¸ &lt;strong&gt;roll&lt;/strong&gt;ï¼ˆå¤ªå·®çš„è§£ç›´æ¥æ”¾å¼ƒåˆ‡æ¢ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;å†ç”¨&lt;strong&gt;ç¯æ¡åœ¨åƒé¢ä¸Šçš„æ•´ä½“å€¾æ–œ&lt;/strong&gt;æ¥åˆ¤æ–­å½“å‰&lt;strong&gt;yaw çš„æ­£è´Ÿæ˜¯å¦â€œåˆç†â€&lt;/strong&gt;ï¼Œå¿…è¦æ—¶å¯¹è°ƒè§£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h3&gt;4.5 BA ä¼˜åŒ–å™¨ä¸å›¾ä¼˜åŒ–ç®—å­ &lt;code&gt;BaSolver&lt;/code&gt; / &lt;code&gt;GraphOptimizer&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æ€æƒ³&lt;/strong&gt;ï¼šåªæŠŠ&lt;strong&gt;è£…ç”² yaw&lt;/strong&gt; å½“æˆä¼˜åŒ–å˜é‡ï¼ˆä¸€ä¸ªé¡¶ç‚¹ &lt;code&gt;VertexYaw&lt;/code&gt;ï¼‰ï¼Œè£…ç”²çš„ 3D è§’ç‚¹ä¸ºå›ºå®šé¡¶ç‚¹ã€‚è§‚æµ‹ä¸ºæ¯ä¸ªè§’ç‚¹åœ¨å›¾åƒé‡Œçš„åƒç´ ä½ç½®ï¼Œè¯¯å·®å°±æ˜¯&lt;strong&gt;è§‚æµ‹åƒç´ &lt;/strong&gt;å‡å»&lt;strong&gt;æŠ•å½±åƒç´ &lt;/strong&gt;ã€‚è¿™æ · BA æ—¢è½»é‡åˆèƒ½ç¨³ä½å§¿æ€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ„å›¾ä¸ä¼˜åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// å¡«å›¾ï¼šä¸€ä¸ª yaw é¡¶ç‚¹ + å››ä¸ªå›ºå®šçš„ 3D é¡¶ç‚¹ + å››æ¡æŠ•å½±è¯¯å·®è¾¹ï¼ˆå¸¦ Huber é²æ£’æ ¸ï¼‰
VertexYaw* v_yaw = new VertexYaw(); v_yaw-&amp;gt;setEstimate(initial_armor_yaw);
for (i in 4 corners) {
  VertexPointXYZ* vp = new VertexPointXYZ(); vp-&amp;gt;setFixed(true);
  EdgeProjection* e = new EdgeProjection(R_camera_imu, R_pitch, t, K);
  e-&amp;gt;setVertex(0, v_yaw); e-&amp;gt;setVertex(1, vp);
  e-&amp;gt;setMeasurement(pixel_observation);
  e-&amp;gt;setRobustKernel(new g2o::RobustKernelHuber);
}
optimizer.initializeOptimization(); optimizer.optimize(20);
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;// è‡ªå®šä¹‰é¡¶ç‚¹å¢é‡ï¼šåœ¨ SO3 ä¸Šç”¨æä»£æ•°æ›´æ–° yawï¼Œé¿å…è§’åº¦è·³å˜
void VertexYaw::oplusImpl(const double* update) {
  Sophus::SO3d R_yaw = Sophus::SO3d::exp({0,0,update[0]}) * Sophus::SO3d::exp({0,0,_estimate});
  _estimate = R_yaw.log()(2);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;// æŠ•å½±è¾¹è¯¯å·®ï¼šåƒç´ è§‚æµ‹ - æŠ•å½±(R_camera_imu * R_yaw * R_pitch * P + t)
void EdgeProjection::computeError() {
  double yaw = static_cast&amp;lt;VertexYaw*&amp;gt;(_vertices[0])-&amp;gt;estimate();
  Sophus::SO3d R = R_camera_imu_ * Sophus::SO3d::exp({0,0,yaw}) * R_pitch_;
  Eigen::Vector3d p = R * P3D + t_;
  Eigen::Vector2d proj = (K_ * (p / p.z())).head&amp;lt;2&amp;gt;();
  _error = obs - proj;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h3&gt;4.6 ROS2 èŠ‚ç‚¹ &lt;code&gt;ArmorDetectorNode&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;èŒè´£&lt;/strong&gt;ï¼šæŠŠæ£€æµ‹ â†’ åˆ†ç±» â†’ï¼ˆå¯é€‰ï¼‰è§’ç‚¹ä¿®æ­£ â†’ PnP/BA â†’ å‘å¸ƒå¯è§†åŒ–ï¼Œå…¨æµç¨‹åœ¨ ROS2 ä¸­è·‘èµ·æ¥ã€‚è´Ÿè´£ï¼šå‚æ•°ã€è®¢é˜…/å‘å¸ƒã€TFã€è°ƒè¯•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;èŠ‚ç‚¹åˆå§‹åŒ–ï¼ˆèŠ‚é€‰ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// è¯»å–å‚æ•°ï¼Œåˆå§‹åŒ– Detectorã€NumberClassifierã€LightCornerCorrector
int binary_thres = declare_parameter(&quot;binary_thres&quot;, 160);
Detector::LightParams l_params = {.min_ratio=0.08, .max_ratio=0.4, .max_angle=40.0, .color_diff_thresh=25};
Detector::ArmorParams a_params = { .min_light_ratio=0.6, .min_small_center_distance=0.8, .max_small_center_distance=3.2,
                                   .min_large_center_distance=3.2, .max_large_center_distance=5.0, .max_angle=35.0 };
detector_ = std::make_unique&amp;lt;Detector&amp;gt;(binary_thres, EnemyColor::RED, l_params, a_params);

auto model_path = utils::URLResolver::getResolvedPath(&quot;package://armor_detector/model/lenet.onnx&quot;);
auto label_path = utils::URLResolver::getResolvedPath(&quot;package://armor_detector/model/label.txt&quot;);
double threshold = declare_parameter(&quot;classifier_threshold&quot;, 0.7);
auto ignores = declare_parameter&amp;lt;std::vector&amp;lt;std::string&amp;gt;&amp;gt;(&quot;ignore_classes&quot;, {&quot;negative&quot;});
detector_-&amp;gt;classifier = std::make_unique&amp;lt;NumberClassifier&amp;gt;(model_path, label_path, threshold, ignores);

bool use_pca = declare_parameter(&quot;use_pca&quot;, true);
if (use_pca) detector_-&amp;gt;corner_corrector = std::make_unique&amp;lt;LightCornerCorrector&amp;gt;();
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;å›¾åƒå›è°ƒï¼ˆèŠ‚é€‰ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// 1) TF: odom â†’ ç›¸æœºçš„æ—‹è½¬çŸ©é˜µï¼ˆIMUâ†’Cameraï¼‰
auto odom_to_cam = tf2_buffer_-&amp;gt;lookupTransform(odom_frame_, img_msg-&amp;gt;header.frame_id, img_msg-&amp;gt;header.stamp, 10ms);
Eigen::Matrix3d imu_to_camera = tf2MatrixFrom(odom_to_cam.transform.rotation);

// 2) æ£€æµ‹ + åˆ†ç±» + è§’ç‚¹ä¿®æ­£
auto armors = detector_-&amp;gt;detect(cv_bridge::toCvShare(img_msg, &quot;rgb8&quot;)-&amp;gt;image);

// 3) PnP/BA æå–ä½å§¿
armors_msg_.armors = armor_pose_estimator_-&amp;gt;extractArmorPoses(armors, imu_to_camera);

// 4) å¯è§†åŒ–ä¸å‘å¸ƒï¼šMarker / è°ƒè¯•å›¾åƒ / Armors
publishMarkersAndDebugImages(...);
armors_pub_-&amp;gt;publish(armors_msg_);
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h2&gt;å‚æ•°å¦‚ä½•å½±å“æ•ˆæœï¼ˆè°ƒå‚æŒ‡å—ï¼‰&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;binary_thres&lt;/code&gt;ï¼šé˜ˆå€¼é«˜â†’å™ªç‚¹å°‘ä½†ç¯æ¡å¯èƒ½æ–­ï¼›é˜ˆå€¼ä½â†’è¿é€šåŸŸç²˜è¿ã€‚å…ˆæ‰“å¼€è°ƒè¯•å›¾åƒè¯é¢˜è§‚å¯Ÿå†è°ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;light.min_ratio / max_ratio / max_angle&lt;/code&gt;ï¼šæ§åˆ¶ç¯æ¡çš„â€œç»†é•¿â€å’Œâ€œè¿‘å‚ç›´â€ç¨‹åº¦ï¼›è¯¯æ£€å¤šå°±æ”¶ç´§ï¼Œæ¼æ£€å¤šå°±æ”¾å®½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;light.color_diff_thresh&lt;/code&gt;ï¼šè¶Šå¤§è¶Šâ€œä¿å®ˆâ€åœ°åˆ¤æ–­é¢œè‰²ï¼›å¤ªå°ä¼šæŠŠæ‚æ•£å…‰å½“æˆçº¢/è“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;armor.*_center_distance&lt;/code&gt;ï¼šä¸¤ç¯æ¡ä¸­å¿ƒè·çª—å£ï¼›ä¸ç„¦è·/è·ç¦»æœ‰å…³ï¼Œé•œå¤´å˜åŒ–åè¦é‡è°ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;classifier_threshold / ignore_classes&lt;/code&gt;ï¼šåˆ†ç±»é˜ˆå€¼ä¸å¿½ç•¥ç±»ï¼Œå…ˆæ¾åç´§ï¼Œç»“åˆå®æµ‹æ··æ·†å†æ”¶æ•›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;use_pca&lt;/code&gt;ï¼šè§’ç‚¹ä¿®æ­£ï¼Œå™ªå£°ç¯å¢ƒæˆ–åˆ†è¾¨ç‡ä¸é«˜æ—¶å¸¸æœ‰å¸®åŠ©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;use_ba&lt;/code&gt;ï¼šè½»é‡çš„ yaw ä¼˜åŒ–ï¼Œèƒ½å‡æŠ–ã€ç¨³å§¿æ€ï¼›ä½†åœ¨æç«¯è§†è§’ä¸‹å¯èƒ½æ”¶ç›Šæœ‰é™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;å®æˆ˜ï¼šä»æºç åˆ°è¿è¡Œä¸å¯è§†åŒ–&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‡†å¤‡&lt;/strong&gt;ï¼šç›¸æœºè¯é¢˜ &lt;code&gt;image_raw&lt;/code&gt;ã€&lt;code&gt;camera_info&lt;/code&gt;ï¼Œå¹¶ç¡®è®¤ TF é“¾è·¯ï¼ˆ&lt;code&gt;odom â†’ camera&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯åŠ¨èŠ‚ç‚¹&lt;/strong&gt;ï¼šåŠ è½½å‚æ•°ï¼ˆä¸Šé¢æåˆ°çš„é˜ˆå€¼ä¸çª—å£ï¼‰å¹¶æ‰“å¼€ &lt;code&gt;debug&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RViz&lt;/strong&gt;ï¼šæ·»åŠ  &lt;code&gt;MarkerArray&lt;/code&gt; è®¢é˜… &lt;code&gt;armor_detector/marker&lt;/code&gt;ï¼›æŠŠè°ƒè¯•å›¾åƒè¯é¢˜ï¼ˆ&lt;code&gt;binary_img/number_img/result_img&lt;/code&gt;ï¼‰ä¹Ÿå¼€å‡ºæ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§‚å¯Ÿä¸è°ƒæ•´&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å…ˆè®©&lt;strong&gt;ç¯æ¡å€™é€‰&lt;/strong&gt;ç¨³å®š â†’ å†çœ‹&lt;strong&gt;é…å¯¹&lt;/strong&gt;æ˜¯å¦åˆç† â†’ æœ€åçœ‹&lt;strong&gt;æ•°å­—åˆ†ç±»&lt;/strong&gt;ä¸&lt;strong&gt;ä½å§¿&lt;/strong&gt;æ˜¯å¦ç¨³å®šã€‚&lt;/li&gt;
&lt;li&gt;é€é¡¹å¾®è°ƒå‚æ•°ï¼Œè®°å½•æ¯é¡¹è°ƒæ•´å¯¹å¬å›/ç²¾åº¦çš„å½±å“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr /&gt;
&lt;h2&gt;å¸¸è§é—®é¢˜ä¸å®šä½æ€è·¯&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¯æ¡â€œå¤¹ç¯â€/è¯¯é…å¯¹&lt;/strong&gt;ï¼šæ£€æŸ¥ &lt;code&gt;containLight&lt;/code&gt; è§„åˆ™ä¸æ•°å­—/çº¢ç‚¹å®½åº¦è¿‡æ»¤ï¼›é€‚å½“æé«˜ &lt;code&gt;color_diff_thresh&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†ç±»ä¸ç¨³&lt;/strong&gt;ï¼šå¯¹æ¯” &lt;code&gt;number_img&lt;/code&gt; æ˜¯å¦å¹²å‡€ï¼›æ£€æŸ¥ ROI å®½åº¦æ˜¯å¦ä¸å¤§/å°è£…ç”²ä¸€è‡´ï¼›é€‚å½“è°ƒé˜ˆå€¼æˆ–å¿½ç•¥ç±»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½å§¿â€œç¿»é¢â€&lt;/strong&gt;ï¼šç†è§£ &lt;code&gt;sortPnPResult&lt;/code&gt; çš„é€‰æ‹©é€»è¾‘ï¼ˆè¯¯å·®ã€rollã€ç¯æ¡å€¾è§’ä¸ yaw æ­£è´Ÿï¼‰ï¼Œå¿…è¦æ—¶åœ¨è¿‘æ™¯è´´çº¸çº¹ç†ä¸Šåšè¾…åŠ©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å§¿æ€æŠ–åŠ¨&lt;/strong&gt;ï¼šå¼€å¯ &lt;code&gt;use_ba&lt;/code&gt;ï¼›æˆ–åœ¨ &lt;code&gt;LightCornerCorrector&lt;/code&gt; ä¸­åŠ å¤§å€™é€‰æ¡æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2&gt;è¿›é˜¶ç»ƒä¹ é¢˜ï¼ˆå¸¦æ–¹å‘æç¤ºï¼‰&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æŠŠé˜ˆå€¼æ”¹æˆè‡ªé€‚åº”&lt;/strong&gt;ï¼šå°è¯• &lt;code&gt;cv::adaptiveThreshold&lt;/code&gt; æˆ–æ ¹æ®åŒºåŸŸäº®åº¦åŠ¨æ€è°ƒ &lt;code&gt;binary_thres&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ å…¥æ—¶åºç¨³å®š&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;Detector&lt;/code&gt; è¾“å‡ºä¸Šåšè·Ÿè¸ªï¼ˆKalman/åŒˆç‰™åˆ©åŒ¹é…ï¼‰ï¼Œè®©æ•°å­—ä¸å§¿æ€åœ¨å¸§é—´æ›´ç¨³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å¢å¼ºä¸å†è®­ç»ƒ&lt;/strong&gt;ï¼šå¯¹ &lt;code&gt;number_img&lt;/code&gt; åšéšæœºä»¿å°„/å™ªå£°å¢å¼ºï¼Œå¾®è°ƒ ONNX æ¨¡å‹ï¼Œè§‚å¯Ÿæ··æ·†ç±»çš„æ”¹å–„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šç›®æ ‡é€‰æ‹©ç­–ç•¥&lt;/strong&gt;ï¼šå½“åŒå±å¤šå—è£…ç”²æ—¶ï¼ŒåŸºäº &lt;code&gt;distance_to_image_center&lt;/code&gt;ã€ç½®ä¿¡åº¦æˆ–å†å² ID é€‰æ‹©ç›®æ ‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr /&gt;
&lt;h2&gt;æœ¯è¯­ä¸åæ ‡ç³»å°æŠ„&lt;/h2&gt;
</content:encoded></item><item><title>è§†é¢‘æµ‹è¯•</title><link>https://www.nanye404.top/posts/video/</link><guid isPermaLink="true">https://www.nanye404.top/posts/video/</guid><description>è§†é¢‘æµ‹è¯•ã€‚</description><pubDate>Tue, 21 Oct 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;è¿™æ˜¯è§†é¢‘æµ‹è¯•&lt;/p&gt;
&lt;h2&gt;YouTube&lt;/h2&gt;
&lt;p&gt;&amp;lt;iframe width=&quot;100%&quot; height=&quot;468&quot; src=&quot;https://www.youtube.com/embed/5gIf0_xpFPI?si=N1WTorLKL0uwLsU_&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; allowfullscreen&amp;gt;&amp;lt;/iframe&amp;gt;&lt;/p&gt;
&lt;h2&gt;Bilibili&lt;/h2&gt;
&lt;p&gt;&amp;lt;iframe width=&quot;100%&quot; height=&quot;468&quot; src=&quot;//player.bilibili.com/player.html?bvid=BV1fK4y1s7Qf&amp;amp;p=1&amp;amp;autoplay=0&quot; scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no&quot; framespacing=&quot;0&quot; allowfullscreen=&quot;true&quot; &amp;amp;autoplay=0&amp;gt; &amp;lt;/iframe&amp;gt;&lt;/p&gt;
</content:encoded></item></channel></rss>